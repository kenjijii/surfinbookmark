<!DOCTYPE html
 PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
    Modified from the Debian original for Ubuntu
    Last updated: 2022-03-22
    See: https://launchpad.net/bugs/1966004
  -->

<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Apache2 Ubuntu Default Page: It works</title>
 <style type="text/css" media="screen">
  body {
   width: 100%;

  }

  #chartbox {
   width: 100%;
   display: flex;
   flex-wrap: wrap;
  }

  .iframebox {
   width: auto;
   height: auto;
  }
 </style>
 <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

 <script>
  function save() {
   var ele = document.getElementById("chartbox");
   var html = ele.innerHTML;
   localStorage.setItem("chartbox", html);
  }
  function clear() {
   localStorage.clear();
   location.reload();
  }
  function load() {
   var ele = document.getElementById("chartbox");
   var html = localStorage.getItem("chartbox");
   ele.innerHTML = html;
  }

  function AddChart(wid, hei, sym, interval) {
   const widthInput = document.getElementById("widthInput");
   const heightInput = document.getElementById("heightInput");
   const width = widthInput.value;
   const height = heightInput.value;

   var s = document.createElement("script");
   s.innerHTML = `
  new TradingView.widget(
   {
    "width": ${wid ? wid : width},
   "height": ${hei ? hei : height},
   "symbol": "FRED:NIKKEI225",
   "interval": "D",
   "timezone": "Etc/UTC",
   "theme": "light",
   "style": "1",
   "locale": "ja",
   "enable_publishing": false,
   "allow_symbol_change": true,
   "container_id": "tradingview_e2add"
 }
  );

 `;

   var ele = document.getElementById("chartbox");
   ele.appendChild(s);
  };

  // 何がしたいのか。
  // 勝ちたい。
  // そのために、m必要なのは
  // インターバルが様々なドル円
  // これは、元から入れておくこと。

  // ちょっとついかできればそれで。
  // 下に追加。
  // あとは、表示が変化できる
  // これは、つまり、表示の種類を変えるボタンを作る。
  // あと、高さで変える。



  // あとは、株などは、ほかページに置く。

  // 今日中に行う



  function width(tvw) {
   const iFms = document.querySelectorAll("iframe");
   let width = tvw;
   let height = tvw * 2 / 3;

   iFms.forEach(iFm => {
    iFm.parentNode.style.width = width + 'vw';
    iFm.parentNode.style.height = height + 'vw';
   });
  };
  // AddChart()

  function dispSize() {
   const { innerWidth: sw, innerHeight: sh } = window;
   return sh > sw ? true : false;
  }

 </script>



</head>

<body>
 <div id="ima">

  <button onclick="width(33)">３</button>
  <button onclick="width(66)">2</button>
  <button onclick="width(99)">1</button>

 </div>

 <div id="chartbox">
 </div>



 <input type="text" class="inputs" id="widthInput" data-width="width" value="33" maxlength="8" size="10" />
 <input type="text" class="inputs" id="heightInput" data-width="height" value="270" maxlength="8" size="10" />

 <button onclick="AddChart()">
  clickme

 </button>
 <button onclick="save()">save</button>
 <button onclick="clear()">clear</button>

</body>

</html>