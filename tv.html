<!DOCTYPE html
 PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
    Modified from the Debian original for Ubuntu
    Last updated: 2022-03-22
    See: https://launchpad.net/bugs/1966004
  -->

<head>

 <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Apache2 Ubuntu Default Page: It works</title>
 <style type="text/css" media="screen">
  body {
   width: 100%;

  }

  .chartbox {
   width: 100%;
   display: flex;
   flex-wrap: wrap;
  }

  .iframebox {
   width: auto;
   height: auto;
  }
 </style>
</head>

<body>
 <div class="chartbox">

  <script type="text/javascript">



   function doAction() {
    let strageValue = JSON.parse(localStorage.getItem('stockName'));
    strageValue = strageValue ? strageValue : [];
    strageValue.push(document.getElementById('stockName').value);

    console.log('くっころ' + strageValue);


    // localStorage.setItem(keyname, JSON.stringify(arr));


    localStorage.setItem('stockName', document.getElementById('stockName').value);
    console.log('dd')

    const script = document.createElement('script');
    script.innerHTML = `
                new TradingView.widget(
                    {
                        "width": 440,
                        "height": 270,
                        "symbol": "NASDAQ:AMD",
                        "interval": "D",
                        "timezone": "Etc/UTC",
                        "theme": "light",
                        "style": "1",
                        "locale": "ja",
                        "enable_publishing": false,
                        "allow_symbol_change": true,
                        "container_id": "tradingview_4bdf3"
                    }
                );
    `;
    document.body.appendChild(script);
   }

  </script>

  <input type="button" value="実行" onclick='doAction( "new" );'>
  <br>
  <input type="text" id="stockName" value="http://winofsql.jp/" style="width:400px;">

  <div id="new"></div>



 </div>
</body>

</html>